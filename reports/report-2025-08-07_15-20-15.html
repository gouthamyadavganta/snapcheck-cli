<!-- output/templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SnapCheck Audit Report</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #121212;
      color: #f5f5f5;
    }
    header, footer {
      background-color: #1e1e1e;
      padding: 1rem 2rem;
    }
    .snapcheck-logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: #00ffe0;
    }
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 2rem;
    }
    .card {
      background-color: #2a2a2a;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1.5rem;
    }
    h2 {
      border-bottom: 1px solid #333;
      padding-bottom: 0.3rem;
    }
    .status-critical { color: #e74c3c; }
    .status-warning { color: #f39c12; }
    .status-success { color: #2ecc71; }
    .status-info    { color: #bdc3c7; }
  </style>
</head>
<body>
  
  <header class="mb-8 flex items-center justify-between border-b border-gray-700 pb-4">
  <div class="text-2xl font-bold tracking-tight" style="color: #00ffe0;">
    ⚡ SnapCheck
  </div>
  <span class="text-sm text-gray-400">Cloud-native DevOps Auditing</span>
</header>

  <!-- Summary Block -->
  <section class="bg-white shadow-md rounded p-4 mb-6">
    <h2 class="text-xl font-semibold mb-2">🔍 Summary</h2>
    <div class="flex gap-6">
      <span class="text-green-600 font-semibold">✅ Passed: 0</span>
      <span class="text-red-600 font-semibold">❌ Failed: 0</span>
      <span class="text-yellow-600 font-semibold">📉 Regressions: 0</span>
    </div>
  </section>

  <!-- GPT Summary -->
  
  <section class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
    <h3 class="text-lg font-semibold mb-1">🤖 GPT Summary</h3>
    <p class="text-sm">⚠️ GPT summary generation failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}</p>
  </section>
  

  <!-- Snapshot Diff -->
  
  <section class="bg-white shadow-md rounded p-4 mb-6">
    <h2 class="text-xl font-semibold mb-2">🔁 Snapshot Changes</h2>
    <ul class="list-disc ml-6">
      
      <li class="text-sm">🆕 New issue: correlation:🟡 Warning:https://grafana.example.com error: HTTPSConnectionPool(host='grafana.example.com', port=443): Max retries exceeded with url: / (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x00000130E3F65A90>: Failed to resolve 'grafana.example.com' ([Errno 11001] getaddrinfo failed)"))</li>
      
      <li class="text-sm">✅ Resolved: correlation:🟡 Warning:https://grafana.example.com error: HTTPSConnectionPool(host='grafana.example.com', port=443): Max retries exceeded with url: / (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x0000019129E45A90>: Failed to resolve 'grafana.example.com' ([Errno 11001] getaddrinfo failed)"))</li>
      
    </ul>
  </section>
  

  <!-- Charts Section -->
  <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
    <div class="bg-white p-4 shadow rounded">
      <h3 class="font-semibold mb-2">💰 Cost Trends</h3>
      <canvas id="costChart" class="w-full h-64"></canvas>
    </div>
    <div class="bg-white p-4 shadow rounded">
      <h3 class="font-semibold mb-2">⚙️ CI Job Duration</h3>
      <canvas id="ciChart" class="w-full h-64"></canvas>
    </div>
  </section>

  <!-- Plugin Sections -->
  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Terraform
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Terraform State
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>Unable to read tfstate or file not found.</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Kubernetes
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Kubernetes Cluster Audit
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>❌ Failed to connect to cluster: Invalid kube-config file. No configuration found.</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Helm
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Helm Audit
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>❌ Helm not installed or not working: [WinError 2] The system cannot find the file specified</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Ci_cd
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Ci_Cd
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>❌ GitHub API Error: Failed to fetch workflow runs: {"message":"Bad credentials","documentation_url":"https://docs.github.com/rest","status":"401"}</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Docker
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Docker Image Audit
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>📦 Scanning image: gantagouthamyadav/inference-api ➤ Tags: latest, a842f7f, 272cda5</li>
              
                <li>gantagouthamyadav/inference-api:latest ➤ 135.02MB | CVEs: 🔴 3  🔶 8  🟡 12  🟢 5</li>
              
                <li>gantagouthamyadav/inference-api:a842f7f ➤ 135.17MB | CVEs: 🔴 3  🔶 8  🟡 12  🟢 5</li>
              
                <li>gantagouthamyadav/inference-api:272cda5 ➤ 135.17MB | CVEs: 🔴 3  🔶 8  🟡 12  🟢 5</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Secrets
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Secrets Audit
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>🔐 GitHub Secrets: 0 total, 0 used, 0 unused</li>
              
                <li>❌ Failed to load kubeconfig</li>
              
                <li>🧬 Hardcoded secrets in codebase: 1699</li>
              
                <li>🧨 Example: .\core\correlator.py:110 ➤ def detect_infra_drift(tfstate_path, aws_region="us-east-1"):</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Cost
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            AWS Cost Analysis
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>❌ Terraform state file not found.</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Gitops
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            GitOps - ArgoCD App: inference-api
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>Sync Status: OutOfSync</li>
              
                <li>Health Status: Degraded</li>
              
                <li>Auto-Sync: Enabled</li>
              
                <li>Self-Heal: Disabled</li>
              
                <li>Revision: abc1234 | Target: main</li>
              
                <li>Last Sync: 2025-07-30T01:00:00Z</li>
              
                <li>Auto Syncs: 1, Manual Syncs: 1</li>
              
                <li>Drifted Resources: 1</li>
              
                <li>Author: goutham</li>
              
                <li>Linked to CI revision: abc1234</li>
              
                <li>Stub: values.yaml drift not detected</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  
    
    
    <details class="mb-4" open>
  <summary class="cursor-pointer font-semibold text-lg bg-gray-100 px-4 py-2 rounded">
    📦 Correlation
  </summary>
  <div class="ml-4 mt-2">
    
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Root Cause Correlation
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>Correlation skipped due to missing or invalid CI/CD or GitOps results.</li>
              
            </ul>
          
        </div>
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Infra Drift Detection
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>Terraform state file not found.</li>
              
            </ul>
          
        </div>
      
        <div class="mb-2">
          <div class="text-sm font-medium text-gray-800">
            Endpoint Uptime / SSL
            <span class="ml-2 text-xs text-gray-700">
              []
            </span>
          </div>
          
            <ul class="list-disc ml-5 text-sm text-gray-700">
              
                <li>https://grafana.example.com error: HTTPSConnectionPool(host='grafana.example.com', port=443): Max retries exceeded with url: / (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x00000130E3F65A90>: Failed to resolve 'grafana.example.com' ([Errno 11001] getaddrinfo failed)"))</li>
              
            </ul>
          
        </div>
      
    
  </div>
</details>


  

  <footer class="text-center text-sm text-gray-500 mt-10">
  Generated by SnapCheck | 2025-08-07 14:47:02
</footer>

  <!-- Chart.js rendering -->
  <script>
    const costChart = document.getElementById('costChart');
    const ciChart = document.getElementById('ciChart');

    new Chart(costChart, {
      type: 'line',
      data: {'labels': ['Jan', 'Feb', 'Mar', 'Apr'], 'datasets': [{'label': 'AWS Cost ($)', 'data': [120, 150, 90, 170], 'fill': False, 'borderColor': 'rgb(75, 192, 192)', 'tension': 0.1}]},
      options: { responsive: true, maintainAspectRatio: false }
    });

    new Chart(ciChart, {
      type: 'bar',
      data: {'labels': ['Build', 'Test', 'Deploy'], 'datasets': [{'label': 'Avg Duration (s)', 'data': [30, 45, 20], 'backgroundColor': ['#6366F1', '#EC4899', '#10B981']}]},
      options: { responsive: true, maintainAspectRatio: false }
    });
  </script>

</body>
</html>